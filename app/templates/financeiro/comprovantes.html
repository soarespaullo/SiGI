{% extends "base.html" %}
{% block title %}Comprovantes{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2><i class="bi bi-file-earmark-text"></i> Comprovantes</h2>

  <form method="POST" enctype="multipart/form-data" class="mb-4">
    {{ form.hidden_tag() }}
    <div class="mb-3">
      {{ form.arquivo.label }} {{ form.arquivo(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.data.label }} {{ form.data(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.descricao.label }} {{ form.descricao(class="form-control") }}
    </div>
    {{ form.submit(class="btn btn-primary") }}
  </form>

  <hr>
  <h4>Comprovantes por mês</h4>
  {% for mes, lista in por_mes.items() %}
    <h5 class="mt-3">{{ mes }}</h5>
    <ul class="list-group">
      {% for r in lista %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ r.data.strftime('%d/%m/%Y') }} - {{ r.descricao or 'Sem descrição' }}
          <a href="{{ url_for('static', filename='uploads/comprovantes/' ~ r.comprovante) }}" target="_blank" class="btn btn-sm btn-outline-secondary">Ver</a>
        </li>
      {% endfor %}
    </ul>
  {% endfor %}
</div>
{% endblock %}
